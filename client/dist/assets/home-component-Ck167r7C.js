import{r as c,d as h,e as p,j as t,f as m,g as x,h as j}from"./index-CQGQ5QzC.js";const y=()=>{const[e,n]=c.useState(""),[r,{isLoading:s}]=h(),d=p(a=>a.auth.user),l=async a=>{if(a.preventDefault(),e.trim()&&d)try{await r({title:e,userId:d.id}).unwrap(),n("")}catch(o){console.error("Failed to add todo: ",o)}};return t.jsxs("form",{onSubmit:l,style:{marginBottom:"20px"},children:[t.jsx("input",{style:{marginRight:"10px"},type:"text",value:e,onChange:a=>n(a.target.value),name:"title",placeholder:"Add new todo"}),t.jsx("button",{type:"submit",style:{background:"blue",color:"white"},disabled:s,children:"Add Todo"}),s&&t.jsx("p",{children:"Adding todo..."})]})},w=({todo:e})=>{const[n,r]=c.useState(!1),[s,d]=c.useState(e.title),[l]=m(),[a]=x(),o=p(i=>i.auth.user),u=async()=>{s.trim()&&s!==e.title&&await l({id:e.id,title:s,userId:o==null?void 0:o.id}).unwrap(),r(!1)},g=async()=>{await a(e.id).unwrap()};return t.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[n?t.jsx("input",{type:"text",value:s,onChange:i=>d(i.target.value),onBlur:u,onKeyDown:i=>i.key==="Enter"&&u()}):t.jsx("span",{style:{textDecoration:e.completed?"line-through":"none",marginRight:"10px"},onDoubleClick:()=>!e.completed&&r(!0),children:e.title}),t.jsx("button",{style:{marginRight:"10px",backgroundColor:"green",color:"white"},onClick:async()=>{await l({id:e.id,completed:!e.completed,userId:o==null?void 0:o.id}).unwrap()},children:e.completed?"Undo":"Complete"}),t.jsx("button",{style:{backgroundColor:"red",color:"white"},onClick:g,children:"Delete"})]})},T=()=>{const{data:e,error:n,isLoading:r}=j();if(r)return t.jsx("div",{children:"Loading..."});if(n){const s="status"in n&&n.status==="FETCH_ERROR"?"Network error":"status"in n&&n.status==="PARSING_ERROR"?"Data parsing error":"data"in n&&typeof n.data=="object"&&n.data!==null&&"message"in n.data?n.data.message:"An unknown error occurred";return t.jsxs("div",{children:["Error: ",s]})}return t.jsx("div",{children:e==null?void 0:e.map(s=>t.jsx(w,{todo:s},s.id))})},f=()=>t.jsxs("div",{children:[t.jsx("h1",{children:"Welcome to Home Page"}),t.jsx(y,{}),t.jsx(T,{})]});export{f as default};
